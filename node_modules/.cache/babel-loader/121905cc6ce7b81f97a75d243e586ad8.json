{"ast":null,"code":"var _jsxFileName = \"/home/jacob/Documents/Programming/myApp/src/dapp/components/farm/NewStone.tsx\",\n    _s = $RefreshSig$();\n\nimport { useService } from \"@xstate/react\";\nimport React, { useEffect } from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\nimport classnames from \"classnames\";\nimport rock from \"../../images/land/rock.png\";\nimport mining from \"../../images/characters/mining.gif\";\nimport stone from \"../../images/ui/rock.png\";\nimport smallRock from \"../../images/decorations/rock2.png\";\nimport pickaxe from \"../../images/ui/wood_pickaxe.png\";\nimport closeIcon from \"../../images/ui/close.png\";\nimport waiting from \"../../images/characters/waiting.gif\";\nimport questionMark from \"../../images/ui/expression_confused.png\";\nimport arrowUp from \"../../images/ui/arrow_up.png\";\nimport arrowDown from \"../../images/ui/arrow_down.png\";\nimport timer from \"../../images/ui/timer.png\";\nimport { Panel } from \"../ui/Panel\";\nimport { Message } from \"../ui/Message\";\nimport { Button } from \"../ui/Button\";\nimport { service } from \"../../machine\";\nimport { items } from \"../../types/crafting\";\nimport \"./Trees.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ROCKS = [{\n  gridColumn: \"9/10\",\n  gridRow: \"11/12\"\n}, {\n  gridColumn: \"14/15\",\n  gridRow: \"11/12\"\n}, {\n  gridColumn: \"15/16\",\n  gridRow: \"8/9\"\n}, {\n  gridColumn: \"14/15\",\n  gridRow: \"4/5\"\n}, {\n  gridColumn: \"15/16\",\n  gridRow: \"2/3\"\n}, {\n  gridColumn: \"11/12\",\n  gridRow: \"2/3\"\n}, {\n  gridColumn: \"9/10\",\n  gridRow: \"2/3\"\n}, {\n  gridColumn: \"4/5\",\n  gridRow: \"2/3\"\n}, {\n  gridColumn: \"1/2\",\n  gridRow: \"4/5\"\n}, {\n  gridColumn: \"1/2\",\n  gridRow: \"11/12\"\n}];\nexport const Stones = _ref => {\n  _s();\n\n  let {\n    inventory\n  } = _ref;\n  const [machineState, send] = useService(service);\n  const [showModal, setShowModal] = React.useState(false);\n  const [treeStrength, setTreeStrength] = React.useState(10);\n  const [amount, setAmount] = React.useState(0);\n  const [choppedCount, setChoppedCount] = React.useState(0);\n  const [showChoppedCount, setShowChoppedCount] = React.useState(false);\n  useEffect(() => {\n    const load = async () => {\n      const strength = await machineState.context.blockChain.getStoneStrength();\n      setTreeStrength(Math.floor(Number(strength)));\n    };\n\n    if (machineState.matches(\"farming\")) {\n      load();\n      setAmount(0);\n    }\n  }, [machineState, machineState.value]);\n  useEffect(() => {\n    const change = machineState.context.blockChain.getInventoryChange();\n\n    if (change.Stone > 0) {\n      setChoppedCount(change.Stone);\n      setShowChoppedCount(true);\n      setTimeout(() => setShowChoppedCount(false), 3000);\n    }\n  }, [machineState.value, inventory, machineState.context.blockChain]);\n\n  const chop = () => {\n    send(\"MINE\", {\n      resource: items.find(item => item.name === \"Stone\").address,\n      amount: amount\n    });\n    setShowModal(false);\n  };\n\n  const open = () => {\n    setShowModal(true);\n    setAmount(1);\n  };\n\n  const close = () => {\n    setShowModal(false);\n    setAmount(0);\n  };\n\n  const limit = Math.min(treeStrength, inventory[\"Wood pickaxe\"]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [ROCKS.map((gridPosition, index) => {\n      const choppedTreeCount = 10 - treeStrength;\n\n      if (choppedTreeCount > index || machineState.matches(\"onboarding\")) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: gridPosition,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: smallRock,\n            className: \"mined-rock gather-tree\",\n            alt: \"tree\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this);\n      }\n\n      const isNextToChop = choppedTreeCount === index;\n      const isHighlighted = amount + choppedTreeCount >= index + 1;\n      const showWaiting = !machineState.matches(\"onboarding\") && !machineState.matches(\"mining\") && (isNextToChop || isHighlighted);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: gridPosition,\n        className: classnames(\"gather-tree\", {\n          \"gatherer-selected\": isHighlighted,\n          gatherer: isNextToChop\n        }),\n        onClick: isNextToChop ? open : undefined,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: rock,\n          className: \"rock-mine\",\n          alt: \"tree\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this), isHighlighted && machineState.matches(\"mining\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: mining,\n            className: \"miner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gathered-resource-feedback\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: stone,\n              className: \"wood-chopped\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), showWaiting && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: waiting,\n            className: \"miner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: questionMark,\n            className: \"miner-question\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }, this);\n    }), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      centered: true,\n      onHide: close,\n      backdrop: false,\n      dialogClassName: \"gather-modal\",\n      children: /*#__PURE__*/_jsxDEV(Panel, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gather-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeIcon,\n            className: \"gather-close-icon\",\n            onClick: close\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resource-materials\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Requires\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: pickaxe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Mines\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"2-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: stone\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Regrows every 2 hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    id: \"resource-timer\",\n                    src: timer\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this), inventory[\"Wood pickaxe\"] < amount ? /*#__PURE__*/_jsxDEV(Message, {\n              children: [\"You need a \", /*#__PURE__*/_jsxDEV(\"img\", {\n                src: pickaxe,\n                className: \"required-tool\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"gather-resources\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"craft-count\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"gather-axe\",\n                  src: pickaxe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Message, {\n                  children: amount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"arrow-container\",\n                  children: [amount < limit ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"craft-arrow\",\n                    alt: \"Step up donation value\",\n                    src: arrowUp,\n                    onClick: () => setAmount(r => r + 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 27\n                  }, this), amount > 1 && /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"craft-arrow\",\n                    alt: \"Step down donation value\",\n                    src: arrowDown,\n                    onClick: () => setAmount(r => r - 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: chop,\n                disabled: inventory[\"Wood pickaxe\"] < amount,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  id: \"craft-button-text\",\n                  children: \"Mine\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resource-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"resource-title\",\n              children: \"Rock\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: rock,\n              className: \"resource-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"resource-description\",\n              children: \"A bountiful resource that can be mined for stone.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"https://docs.sunflower-farmers.com/resources\",\n              target: \"_blank\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"current-price-supply-demand\",\n                children: \"Read more\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"resource-increase-panel\",\n      style: {\n        opacity: showChoppedCount ? 1 : 0\n      },\n      children: /*#__PURE__*/_jsxDEV(Panel, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wood-toast-body\",\n          children: [\"+\", choppedCount, /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"gather-axe\",\n            src: stone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Stones, \"81i1m0AL2sesaXZOydU9OkIFTqw=\", false, function () {\n  return [useService];\n});\n\n_c = Stones;\n\nvar _c;\n\n$RefreshReg$(_c, \"Stones\");","map":{"version":3,"sources":["/home/jacob/Documents/Programming/myApp/src/dapp/components/farm/NewStone.tsx"],"names":["useService","React","useEffect","Modal","classnames","rock","mining","stone","smallRock","pickaxe","closeIcon","waiting","questionMark","arrowUp","arrowDown","timer","Panel","Message","Button","service","items","ROCKS","gridColumn","gridRow","Stones","inventory","machineState","send","showModal","setShowModal","useState","treeStrength","setTreeStrength","amount","setAmount","choppedCount","setChoppedCount","showChoppedCount","setShowChoppedCount","load","strength","context","blockChain","getStoneStrength","Math","floor","Number","matches","value","change","getInventoryChange","Stone","setTimeout","chop","resource","find","item","name","address","open","close","limit","min","map","gridPosition","index","choppedTreeCount","isNextToChop","isHighlighted","showWaiting","gatherer","undefined","r","opacity"],"mappings":"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","sourcesContent":["import { useService } from \"@xstate/react\";\nimport React, { useEffect } from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\nimport classnames from \"classnames\";\n\nimport rock from \"../../images/land/rock.png\";\nimport mining from \"../../images/characters/mining.gif\";\nimport stone from \"../../images/ui/rock.png\";\nimport smallRock from \"../../images/decorations/rock2.png\";\nimport pickaxe from \"../../images/ui/wood_pickaxe.png\";\n\nimport closeIcon from \"../../images/ui/close.png\";\nimport waiting from \"../../images/characters/waiting.gif\";\nimport questionMark from \"../../images/ui/expression_confused.png\";\nimport arrowUp from \"../../images/ui/arrow_up.png\";\nimport arrowDown from \"../../images/ui/arrow_down.png\";\nimport timer from \"../../images/ui/timer.png\";\n\nimport { Panel } from \"../ui/Panel\";\nimport { Message } from \"../ui/Message\";\nimport { Button } from \"../ui/Button\";\n\nimport {\n  BlockchainEvent,\n  BlockchainState,\n  Context,\n  service,\n} from \"../../machine\";\n\nimport { Inventory, items } from \"../../types/crafting\";\n\nimport \"./Trees.css\";\n\nconst ROCKS: React.CSSProperties[] = [\n  {\n    gridColumn: \"9/10\",\n    gridRow: \"11/12\",\n  },\n  {\n    gridColumn: \"14/15\",\n    gridRow: \"11/12\",\n  },\n  {\n    gridColumn: \"15/16\",\n    gridRow: \"8/9\",\n  },\n  {\n    gridColumn: \"14/15\",\n    gridRow: \"4/5\",\n  },\n  {\n    gridColumn: \"15/16\",\n    gridRow: \"2/3\",\n  },\n\n  {\n    gridColumn: \"11/12\",\n    gridRow: \"2/3\",\n  },\n  {\n    gridColumn: \"9/10\",\n    gridRow: \"2/3\",\n  },\n  {\n    gridColumn: \"4/5\",\n    gridRow: \"2/3\",\n  },\n  {\n    gridColumn: \"1/2\",\n    gridRow: \"4/5\",\n  },\n  {\n    gridColumn: \"1/2\",\n    gridRow: \"11/12\",\n  },\n];\n\ninterface Props {\n  inventory: Inventory;\n}\n\nexport const Stones: React.FC<Props> = ({ inventory }) => {\n  const [machineState, send] = useService<\n    Context,\n    BlockchainEvent,\n    BlockchainState\n  >(service);\n\n  const [showModal, setShowModal] = React.useState(false);\n  const [treeStrength, setTreeStrength] = React.useState(10);\n  const [amount, setAmount] = React.useState(0);\n  const [choppedCount, setChoppedCount] = React.useState(0);\n  const [showChoppedCount, setShowChoppedCount] = React.useState(false);\n\n  useEffect(() => {\n    const load = async () => {\n      const strength = await machineState.context.blockChain.getStoneStrength();\n      setTreeStrength(Math.floor(Number(strength)));\n    };\n\n    if (machineState.matches(\"farming\")) {\n      load();\n      setAmount(0);\n    }\n  }, [machineState, machineState.value]);\n\n  useEffect(() => {\n    const change = machineState.context.blockChain.getInventoryChange();\n\n    if (change.Stone > 0) {\n      setChoppedCount(change.Stone);\n      setShowChoppedCount(true);\n      setTimeout(() => setShowChoppedCount(false), 3000);\n    }\n  }, [machineState.value, inventory, machineState.context.blockChain]);\n\n  const chop = () => {\n    send(\"MINE\", {\n      resource: items.find((item) => item.name === \"Stone\").address,\n      amount: amount,\n    });\n\n    setShowModal(false);\n  };\n\n  const open = () => {\n    setShowModal(true);\n    setAmount(1);\n  };\n\n  const close = () => {\n    setShowModal(false);\n    setAmount(0);\n  };\n\n  const limit = Math.min(treeStrength, inventory[\"Wood pickaxe\"]);\n\n  return (\n    <>\n      {ROCKS.map((gridPosition, index) => {\n        const choppedTreeCount = 10 - treeStrength;\n        if (choppedTreeCount > index || machineState.matches(\"onboarding\")) {\n          return (\n            <div style={gridPosition}>\n              <img\n                src={smallRock}\n                className=\"mined-rock gather-tree\"\n                alt=\"tree\"\n              />\n            </div>\n          );\n        }\n\n        const isNextToChop = choppedTreeCount === index;\n        const isHighlighted = amount + choppedTreeCount >= index + 1;\n        const showWaiting =\n          !machineState.matches(\"onboarding\") &&\n          !machineState.matches(\"mining\") &&\n          (isNextToChop || isHighlighted);\n\n        return (\n          <div\n            style={gridPosition}\n            className={classnames(\"gather-tree\", {\n              \"gatherer-selected\": isHighlighted,\n              gatherer: isNextToChop,\n            })}\n            onClick={isNextToChop ? open : undefined}\n          >\n            <img src={rock} className=\"rock-mine\" alt=\"tree\" />\n            {isHighlighted && machineState.matches(\"mining\") && (\n              <>\n                <img src={mining} className=\"miner\" />\n                <div className=\"gathered-resource-feedback\">\n                  <span>+</span>\n                  <img src={stone} className=\"wood-chopped\" />\n                </div>\n              </>\n            )}\n            {showWaiting && (\n              <div>\n                <img src={waiting} className=\"miner\" />\n                <img src={questionMark} className=\"miner-question\" />\n              </div>\n            )}\n          </div>\n        );\n      })}\n\n      {showModal && (\n        <Modal\n          show={showModal}\n          centered\n          onHide={close}\n          backdrop={false}\n          dialogClassName=\"gather-modal\"\n        >\n          <Panel>\n            <div className=\"gather-panel\">\n              <img\n                src={closeIcon}\n                className=\"gather-close-icon\"\n                onClick={close}\n              />\n\n              <div className=\"resource-materials\">\n                <div>\n                  <div className=\"resource-material\">\n                    <span>Requires</span>\n                    <img src={pickaxe} />\n                  </div>\n                  <div className=\"resource-material\">\n                    <span>Mines</span>\n                    <div>\n                      <span>2-4</span>\n                      <img src={stone} />\n                    </div>\n                  </div>\n                  <div className=\"resource-material\">\n                    <span>Regrows every 2 hours</span>\n                    <div>\n                      <img id=\"resource-timer\" src={timer} />\n                    </div>\n                  </div>\n                </div>\n                {inventory[\"Wood pickaxe\"] < amount ? (\n                  <Message>\n                    You need a <img src={pickaxe} className=\"required-tool\" />\n                  </Message>\n                ) : (\n                  <div className=\"gather-resources\">\n                    <div id=\"craft-count\">\n                      <img className=\"gather-axe\" src={pickaxe} />\n                      <Message>{amount}</Message>\n                      <div id=\"arrow-container\">\n                        {amount < limit ? (\n                          <img\n                            className=\"craft-arrow\"\n                            alt=\"Step up donation value\"\n                            src={arrowUp}\n                            onClick={() => setAmount((r) => r + 1)}\n                          />\n                        ) : (\n                          <div />\n                        )}\n\n                        {amount > 1 && (\n                          <img\n                            className=\"craft-arrow\"\n                            alt=\"Step down donation value\"\n                            src={arrowDown}\n                            onClick={() => setAmount((r) => r - 1)}\n                          />\n                        )}\n                      </div>\n                    </div>\n\n                    <Button\n                      onClick={chop}\n                      disabled={inventory[\"Wood pickaxe\"] < amount}\n                    >\n                      <span id=\"craft-button-text\">Mine</span>\n                    </Button>\n                  </div>\n                )}\n              </div>\n              <div className=\"resource-details\">\n                <span className=\"resource-title\">Rock</span>\n                <img src={rock} className=\"resource-image\" />\n                <span className=\"resource-description\">\n                  A bountiful resource that can be mined for stone.\n                </span>\n                <a\n                  href=\"https://docs.sunflower-farmers.com/resources\"\n                  target=\"_blank\"\n                >\n                  <h3 className=\"current-price-supply-demand\">Read more</h3>\n                </a>\n              </div>\n            </div>\n          </Panel>\n        </Modal>\n      )}\n      <div\n        id=\"resource-increase-panel\"\n        style={{\n          opacity: showChoppedCount ? 1 : 0,\n        }}\n      >\n        <Panel>\n          <div className=\"wood-toast-body\">\n            +{choppedCount}\n            <img className=\"gather-axe\" src={stone} />\n          </div>\n        </Panel>\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}