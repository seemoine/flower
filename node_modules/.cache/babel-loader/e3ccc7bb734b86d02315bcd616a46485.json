{"ast":null,"code":"var _jsxFileName = \"/home/jacob/Documents/Programming/myApp/src/dapp/components/farm/Gold.tsx\",\n    _s = $RefreshSig$();\n\nimport \"./Trees.css\";\nimport \"./Gold.css\";\nimport { useService } from \"@xstate/react\";\nimport classnames from \"classnames\";\nimport React, { useEffect } from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\nimport mining from \"../../images/characters/mining.gif\";\nimport waiting from \"../../images/characters/waiting.gif\";\nimport smallRock from \"../../images/decorations/rock2.png\";\nimport rock from \"../../images/land/gold.png\";\nimport arrowDown from \"../../images/ui/arrow_down.png\";\nimport arrowUp from \"../../images/ui/arrow_up.png\";\nimport closeIcon from \"../../images/ui/close.png\";\nimport questionMark from \"../../images/ui/expression_confused.png\";\nimport stone from \"../../images/ui/gold_ore.png\";\nimport pickaxe from \"../../images/ui/iron_pickaxe.png\";\nimport timer from \"../../images/ui/timer.png\";\nimport { service } from \"../../machine\";\nimport { items } from \"../../types/crafting\";\nimport { Button } from \"../ui/Button\";\nimport { Message } from \"../ui/Message\";\nimport { Panel } from \"../ui/Panel\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ROCKS = [{\n  gridColumn: \"13/14\",\n  gridRow: \"111/12\"\n}, {\n  gridColumn: \"11/12\",\n  gridRow: \"10/11\"\n}];\nexport const Gold = _ref => {\n  _s();\n\n  let {\n    inventory\n  } = _ref;\n  const [machineState, send] = useService(service);\n  const [showModal, setShowModal] = React.useState(false);\n  const [treeStrength, setTreeStrength] = React.useState(2);\n  const [amount, setAmount] = React.useState(0);\n  const [choppedCount, setChoppedCount] = React.useState(0);\n  const [showChoppedCount, setShowChoppedCount] = React.useState(false);\n  useEffect(() => {\n    const load = async () => {\n      const strength = await machineState.context.blockChain.getGoldStrength();\n      setTreeStrength(Math.floor(Number(strength)));\n    };\n\n    if (machineState.matches(\"farming\")) {\n      load();\n      setAmount(0);\n    }\n  }, [machineState, machineState.value]);\n  useEffect(() => {\n    const change = machineState.context.blockChain.getInventoryChange();\n\n    if (change.Gold > 0) {\n      setChoppedCount(change.Gold);\n      setShowChoppedCount(true);\n      setTimeout(() => setShowChoppedCount(false), 3000);\n    }\n  }, [machineState.value, inventory, machineState.context.blockChain]);\n\n  const chop = () => {\n    send(\"MINE\", {\n      resource: items.find(item => item.name === \"Gold\").address,\n      amount: amount\n    });\n    setShowModal(false);\n  };\n\n  const open = () => {\n    setShowModal(true);\n    setAmount(1);\n  };\n\n  const close = () => {\n    setShowModal(false);\n    setAmount(0);\n  };\n\n  const limit = Math.min(treeStrength, inventory[\"Iron Pickaxe\"]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [ROCKS.map((gridPosition, index) => {\n      const choppedTreeCount = 2 - treeStrength;\n\n      if (choppedTreeCount > index || machineState.matches(\"onboarding\")) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: gridPosition,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: smallRock,\n            className: \"mined-rock gather-tree\",\n            alt: \"tree\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this);\n      }\n\n      const isNextToChop = choppedTreeCount === index;\n      const isHighlighted = amount + choppedTreeCount >= index + 1;\n      const showWaiting = !machineState.matches(\"onboarding\") && !machineState.matches(\"mining\") && (isNextToChop || isHighlighted);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: gridPosition,\n        className: classnames(\"gather-tree\", \"game-object\", \"gold\", {\n          \"gatherer-selected\": isHighlighted,\n          gatherer: isNextToChop\n        }),\n        onClick: isNextToChop ? open : undefined,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: rock,\n          className: \"rock-mine ore\",\n          alt: \"tree\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this), isHighlighted && machineState.matches(\"mining\") && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"boundary show-overflow\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: mining,\n            className: \"miner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gathered-resource-feedback\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: stone,\n              className: \"wood-chopped\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 15\n        }, this), showWaiting && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"boundary\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: waiting,\n            className: \"miner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: questionMark,\n            className: \"miner-question\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this);\n    }), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      centered: true,\n      onHide: close,\n      backdrop: false,\n      dialogClassName: \"gather-modal\",\n      children: /*#__PURE__*/_jsxDEV(Panel, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gather-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeIcon,\n            className: \"gather-close-icon\",\n            onClick: close\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resource-materials\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Requires\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: pickaxe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Mines\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"1-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: stone\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Regrows every 12 hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    id: \"resource-timer\",\n                    src: timer\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), inventory[\"Iron Pickaxe\"] < amount ? /*#__PURE__*/_jsxDEV(Message, {\n              children: [\"You need a\", \" \", /*#__PURE__*/_jsxDEV(\"img\", {\n                src: pickaxe,\n                className: \"required-tool\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"gather-resources\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"craft-count\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"gather-axe\",\n                  src: pickaxe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Message, {\n                  children: amount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"arrow-container\",\n                  children: [amount < limit ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"craft-arrow\",\n                    alt: \"Step up donation value\",\n                    src: arrowUp,\n                    onClick: () => setAmount(r => r + 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 27\n                  }, this), amount > 1 && /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"craft-arrow\",\n                    alt: \"Step down donation value\",\n                    src: arrowDown,\n                    onClick: () => setAmount(r => r - 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: chop,\n                disabled: inventory[\"Iron Pickaxe\"] < amount,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  id: \"craft-button-text\",\n                  children: \"Mine\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resource-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"resource-title\",\n              children: \"Gold mine\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: rock,\n              className: \"resource-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"resource-description\",\n              children: \"A scarce resource that can be mined for gold.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"https://docs.sunflower-farmers.com/resources\",\n              target: \"_blank\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"current-price-supply-demand\",\n                children: \"Read more\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"resource-increase-panel\",\n      style: {\n        opacity: showChoppedCount ? 1 : 0\n      },\n      children: /*#__PURE__*/_jsxDEV(Panel, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wood-toast-body\",\n          children: [\"+\", choppedCount, /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"gather-axe\",\n            src: stone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Gold, \"PhpQp3XeRXUvwaquO46NTH4J/Zw=\", false, function () {\n  return [useService];\n});\n\n_c = Gold;\n\nvar _c;\n\n$RefreshReg$(_c, \"Gold\");","map":{"version":3,"sources":["/home/jacob/Documents/Programming/myApp/src/dapp/components/farm/Gold.tsx"],"names":["useService","classnames","React","useEffect","Modal","mining","waiting","smallRock","rock","arrowDown","arrowUp","closeIcon","questionMark","stone","pickaxe","timer","service","items","Button","Message","Panel","ROCKS","gridColumn","gridRow","Gold","inventory","machineState","send","showModal","setShowModal","useState","treeStrength","setTreeStrength","amount","setAmount","choppedCount","setChoppedCount","showChoppedCount","setShowChoppedCount","load","strength","context","blockChain","getGoldStrength","Math","floor","Number","matches","value","change","getInventoryChange","setTimeout","chop","resource","find","item","name","address","open","close","limit","min","map","gridPosition","index","choppedTreeCount","isNextToChop","isHighlighted","showWaiting","gatherer","undefined","r","opacity"],"mappings":"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","sourcesContent":["import \"./Trees.css\";\nimport \"./Gold.css\";\n\nimport { useService } from \"@xstate/react\";\nimport classnames from \"classnames\";\nimport React, { useEffect } from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\n\nimport mining from \"../../images/characters/mining.gif\";\nimport waiting from \"../../images/characters/waiting.gif\";\nimport smallRock from \"../../images/decorations/rock2.png\";\nimport rock from \"../../images/land/gold.png\";\nimport arrowDown from \"../../images/ui/arrow_down.png\";\nimport arrowUp from \"../../images/ui/arrow_up.png\";\nimport closeIcon from \"../../images/ui/close.png\";\nimport questionMark from \"../../images/ui/expression_confused.png\";\nimport stone from \"../../images/ui/gold_ore.png\";\nimport pickaxe from \"../../images/ui/iron_pickaxe.png\";\nimport timer from \"../../images/ui/timer.png\";\nimport {\n  BlockchainEvent,\n  BlockchainState,\n  Context,\n  service,\n} from \"../../machine\";\nimport { Inventory, items } from \"../../types/crafting\";\nimport { Button } from \"../ui/Button\";\nimport { Message } from \"../ui/Message\";\nimport { Panel } from \"../ui/Panel\";\n\nconst ROCKS: React.CSSProperties[] = [\n  {\n    gridColumn: \"13/14\",\n    gridRow: \"111/12\",\n  },\n  {\n    gridColumn: \"11/12\",\n    gridRow: \"10/11\",\n  },\n];\n\ninterface Props {\n  inventory: Inventory;\n}\n\nexport const Gold: React.FC<Props> = ({ inventory }) => {\n  const [machineState, send] = useService<\n    Context,\n    BlockchainEvent,\n    BlockchainState\n  >(service);\n\n  const [showModal, setShowModal] = React.useState(false);\n  const [treeStrength, setTreeStrength] = React.useState(2);\n  const [amount, setAmount] = React.useState(0);\n  const [choppedCount, setChoppedCount] = React.useState(0);\n  const [showChoppedCount, setShowChoppedCount] = React.useState(false);\n\n  useEffect(() => {\n    const load = async () => {\n      const strength =\n        await machineState.context.blockChain.getGoldStrength();\n      setTreeStrength(Math.floor(Number(strength)));\n    };\n\n    if (machineState.matches(\"farming\")) {\n      load();\n      setAmount(0);\n    }\n  }, [machineState, machineState.value]);\n\n  useEffect(() => {\n    const change = machineState.context.blockChain.getInventoryChange();\n\n    if (change.Gold > 0) {\n      setChoppedCount(change.Gold);\n      setShowChoppedCount(true);\n      setTimeout(() => setShowChoppedCount(false), 3000);\n    }\n  }, [machineState.value, inventory, machineState.context.blockChain]);\n\n  const chop = () => {\n    send(\"MINE\", {\n      resource: items.find((item) => item.name === \"Gold\").address,\n      amount: amount,\n    });\n\n    setShowModal(false);\n  };\n\n  const open = () => {\n    setShowModal(true);\n    setAmount(1);\n  };\n\n  const close = () => {\n    setShowModal(false);\n    setAmount(0);\n  };\n\n  const limit = Math.min(treeStrength, inventory[\"Iron Pickaxe\"]);\n\n  return (\n    <>\n      {ROCKS.map((gridPosition, index) => {\n        const choppedTreeCount = 2 - treeStrength;\n        if (\n          choppedTreeCount > index ||\n          machineState.matches(\"onboarding\")\n        ) {\n          return (\n            <div style={gridPosition}>\n              <img\n                src={smallRock}\n                className=\"mined-rock gather-tree\"\n                alt=\"tree\"\n              />\n            </div>\n          );\n        }\n\n        const isNextToChop = choppedTreeCount === index;\n        const isHighlighted = amount + choppedTreeCount >= index + 1;\n        const showWaiting =\n          !machineState.matches(\"onboarding\") &&\n          !machineState.matches(\"mining\") &&\n          (isNextToChop || isHighlighted);\n\n        return (\n          <div\n            style={gridPosition}\n            className={classnames(\"gather-tree\", \"game-object\", \"gold\", {\n              \"gatherer-selected\": isHighlighted,\n              gatherer: isNextToChop,\n            })}\n            onClick={isNextToChop ? open : undefined}\n          >\n            <img src={rock} className=\"rock-mine ore\" alt=\"tree\" />\n            {isHighlighted && machineState.matches(\"mining\") && (\n              <div className=\"boundary show-overflow\">\n                <img src={mining} className=\"miner\" />\n                <div className=\"gathered-resource-feedback\">\n                  <span>+</span>\n                  <img src={stone} className=\"wood-chopped\" />\n                </div>\n              </div>\n            )}\n            {showWaiting && (\n              <div className=\"boundary\">\n                <img src={waiting} className=\"miner\" />\n                <img src={questionMark} className=\"miner-question\" />\n              </div>\n            )}\n          </div>\n        );\n      })}\n\n      {showModal && (\n        <Modal\n          show={showModal}\n          centered\n          onHide={close}\n          backdrop={false}\n          dialogClassName=\"gather-modal\"\n        >\n          <Panel>\n            <div className=\"gather-panel\">\n              <img\n                src={closeIcon}\n                className=\"gather-close-icon\"\n                onClick={close}\n              />\n\n              <div className=\"resource-materials\">\n                <div>\n                  <div className=\"resource-material\">\n                    <span>Requires</span>\n                    <img src={pickaxe} />\n                  </div>\n                  <div className=\"resource-material\">\n                    <span>Mines</span>\n                    <div>\n                      <span>1-2</span>\n                      <img src={stone} />\n                    </div>\n                  </div>\n                  <div className=\"resource-material\">\n                    <span>Regrows every 12 hours</span>\n                    <div>\n                      <img id=\"resource-timer\" src={timer} />\n                    </div>\n                  </div>\n                </div>\n                {inventory[\"Iron Pickaxe\"] < amount ? (\n                  <Message>\n                    You need a{\" \"}\n                    <img src={pickaxe} className=\"required-tool\" />\n                  </Message>\n                ) : (\n                  <div className=\"gather-resources\">\n                    <div id=\"craft-count\">\n                      <img className=\"gather-axe\" src={pickaxe} />\n                      <Message>{amount}</Message>\n                      <div id=\"arrow-container\">\n                        {amount < limit ? (\n                          <img\n                            className=\"craft-arrow\"\n                            alt=\"Step up donation value\"\n                            src={arrowUp}\n                            onClick={() => setAmount((r) => r + 1)}\n                          />\n                        ) : (\n                          <div />\n                        )}\n\n                        {amount > 1 && (\n                          <img\n                            className=\"craft-arrow\"\n                            alt=\"Step down donation value\"\n                            src={arrowDown}\n                            onClick={() => setAmount((r) => r - 1)}\n                          />\n                        )}\n                      </div>\n                    </div>\n\n                    <Button\n                      onClick={chop}\n                      disabled={inventory[\"Iron Pickaxe\"] < amount}\n                    >\n                      <span id=\"craft-button-text\">Mine</span>\n                    </Button>\n                  </div>\n                )}\n              </div>\n              <div className=\"resource-details\">\n                <span className=\"resource-title\">Gold mine</span>\n                <img src={rock} className=\"resource-image\" />\n                <span className=\"resource-description\">\n                  A scarce resource that can be mined for gold.\n                </span>\n                <a\n                  href=\"https://docs.sunflower-farmers.com/resources\"\n                  target=\"_blank\"\n                >\n                  <h3 className=\"current-price-supply-demand\">\n                    Read more\n                  </h3>\n                </a>\n              </div>\n            </div>\n          </Panel>\n        </Modal>\n      )}\n      <div\n        id=\"resource-increase-panel\"\n        style={{\n          opacity: showChoppedCount ? 1 : 0,\n        }}\n      >\n        <Panel>\n          <div className=\"wood-toast-body\">\n            +{choppedCount}\n            <img className=\"gather-axe\" src={stone} />\n          </div>\n        </Panel>\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}