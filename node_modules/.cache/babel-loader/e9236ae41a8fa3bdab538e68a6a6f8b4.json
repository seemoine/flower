{"ast":null,"code":"var _jsxFileName = \"/home/jacob/Documents/Programming/myApp/src/dapp/components/farm/NewTrees.tsx\",\n    _s = $RefreshSig$();\n\nimport { useService } from \"@xstate/react\";\nimport React, { useEffect } from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\nimport classnames from \"classnames\";\nimport closeIcon from \"../../images/ui/close.png\";\nimport tree from \"../../images/decorations/tree.png\";\nimport stump from \"../../images/decorations/stump.png\";\nimport chopping from \"../../images/characters/chopping.gif\";\nimport waiting from \"../../images/characters/waiting.gif\";\nimport questionMark from \"../../images/ui/expression_confused.png\";\nimport arrowUp from \"../../images/ui/arrow_up.png\";\nimport arrowDown from \"../../images/ui/arrow_down.png\";\nimport axe from \"../../images/ui/axe.png\";\nimport wood from \"../../images/ui/wood.png\";\nimport timer from \"../../images/ui/timer.png\";\nimport { Panel } from \"../ui/Panel\";\nimport { Message } from \"../ui/Message\";\nimport { Button } from \"../ui/Button\";\nimport { service } from \"../../machine\";\nimport { items } from \"../../types/crafting\";\nimport \"./Trees.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TREES = [{\n  gridColumn: \"9/10\",\n  gridRow: \"3/4\"\n}, {\n  gridColumn: \"5/6\",\n  gridRow: \"3/4\"\n}, {\n  gridColumn: \"2/3\",\n  gridRow: \"2/3\"\n}, {\n  gridColumn: \"3/4\",\n  gridRow: \"6/7\"\n}, {\n  gridColumn: \"1/2\",\n  gridRow: \"8/9\"\n}, {\n  gridColumn: \"3/4\",\n  gridRow: \"11/12\"\n}, {\n  gridColumn: \"7/8\",\n  gridRow: \"11/12\"\n}, {\n  gridColumn: \"12/13\",\n  gridRow: \"11/12\"\n}, {\n  gridColumn: \"15/16\",\n  gridRow: \"3/4\"\n}, {\n  gridColumn: \"12/13\",\n  gridRow: \"1/2\"\n}];\nexport const Trees = _ref => {\n  _s();\n\n  let {\n    inventory\n  } = _ref;\n  const [machineState, send] = useService(service);\n  const [showModal, setShowModal] = React.useState(false);\n  const [treeStrength, setTreeStrength] = React.useState(10);\n  const [amount, setAmount] = React.useState(0);\n  const [choppedCount, setChoppedCount] = React.useState(0);\n  const [showChoppedCount, setShowChoppedCount] = React.useState(false);\n  useEffect(() => {\n    const load = async () => {\n      const strength = await machineState.context.blockChain.getTreeStrength();\n      setTreeStrength(Math.floor(Number(strength)));\n    };\n\n    if (machineState.matches(\"farming\")) {\n      load();\n      setAmount(0);\n    }\n  }, [machineState.value]);\n  useEffect(() => {\n    const change = machineState.context.blockChain.getInventoryChange();\n\n    if (change.Wood > 0) {\n      setChoppedCount(change.Wood);\n      setShowChoppedCount(true);\n      setTimeout(() => setShowChoppedCount(false), 3000);\n    }\n  }, [machineState.value, inventory]);\n\n  const chop = () => {\n    send(\"CHOP\", {\n      resource: items.find(item => item.name === \"Wood\").address,\n      amount: amount\n    });\n    setShowModal(false);\n  };\n\n  const open = () => {\n    setShowModal(true);\n    setAmount(1);\n  };\n\n  const close = () => {\n    setShowModal(false);\n    setAmount(0);\n  };\n\n  const limit = Math.min(treeStrength, inventory.Axe);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [TREES.map((gridPosition, index) => {\n      const choppedTreeCount = 10 - treeStrength;\n\n      if (choppedTreeCount > index || machineState.matches(\"onboarding\")) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: gridPosition,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: stump,\n            className: \"wood-stump gather-tree\",\n            alt: \"tree\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this);\n      }\n\n      const isNextToChop = choppedTreeCount === index;\n      const isHighlighted = amount + choppedTreeCount >= index + 1;\n      const showWaiting = !machineState.matches(\"onboarding\") && !machineState.matches(\"chopping\") && (isNextToChop || isHighlighted);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: gridPosition,\n        className: classnames(\"gather-tree\", {\n          \"gatherer-selected\": isHighlighted,\n          gatherer: isNextToChop\n        }),\n        onClick: isNextToChop ? open : undefined,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: tree,\n          className: \"tree\",\n          alt: \"tree\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), isHighlighted && machineState.matches(\"chopping\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: chopping,\n            className: \"wood-chopper\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gathered-resource-feedback\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: wood,\n              className: \"wood-chopped\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), showWaiting && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: waiting,\n            className: \"wood-chopper\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: questionMark,\n            className: \"chopper-question\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this);\n    }), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      centered: true,\n      onHide: close,\n      backdrop: false,\n      dialogClassName: \"gather-modal\",\n      children: /*#__PURE__*/_jsxDEV(Panel, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gather-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: closeIcon,\n            className: \"gather-close-icon\",\n            onClick: close\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resource-materials\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Requires\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: axe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Chops\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"3-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: wood\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"resource-material\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Regrows every hour\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    id: \"resource-timer\",\n                    src: timer\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), inventory.Axe < amount ? /*#__PURE__*/_jsxDEV(Message, {\n              children: [\"You need a \", /*#__PURE__*/_jsxDEV(\"img\", {\n                src: axe,\n                className: \"required-tool\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"gather-resources\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"craft-count\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"gather-axe\",\n                  src: axe\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Message, {\n                  children: amount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  id: \"arrow-container\",\n                  children: [amount < limit ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"craft-arrow\",\n                    alt: \"Step up donation value\",\n                    src: arrowUp,\n                    onClick: () => setAmount(r => r + 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 27\n                  }, this), amount > 1 && /*#__PURE__*/_jsxDEV(\"img\", {\n                    className: \"craft-arrow\",\n                    alt: \"Step down donation value\",\n                    src: arrowDown,\n                    onClick: () => setAmount(r => r - 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: chop,\n                disabled: inventory.Axe < amount,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  id: \"craft-button-text\",\n                  children: \"Chop\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resource-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"resource-title\",\n              children: \"Tree\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: tree,\n              className: \"resource-image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"resource-description\",\n              children: \"A bountiful resource that can be chopped for wood.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"https://docs.sunflower-farmers.com/resources\",\n              target: \"_blank\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"current-price-supply-demand\",\n                children: \"Read more\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"resource-increase-panel\",\n      style: {\n        opacity: showChoppedCount ? 1 : 0\n      },\n      children: /*#__PURE__*/_jsxDEV(Panel, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wood-toast-body\",\n          children: [\"+\", choppedCount, /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"gather-axe\",\n            src: wood\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Trees, \"81i1m0AL2sesaXZOydU9OkIFTqw=\", false, function () {\n  return [useService];\n});\n\n_c = Trees;\n\nvar _c;\n\n$RefreshReg$(_c, \"Trees\");","map":{"version":3,"sources":["/home/jacob/Documents/Programming/myApp/src/dapp/components/farm/NewTrees.tsx"],"names":["useService","React","useEffect","Modal","classnames","closeIcon","tree","stump","chopping","waiting","questionMark","arrowUp","arrowDown","axe","wood","timer","Panel","Message","Button","service","items","TREES","gridColumn","gridRow","Trees","inventory","machineState","send","showModal","setShowModal","useState","treeStrength","setTreeStrength","amount","setAmount","choppedCount","setChoppedCount","showChoppedCount","setShowChoppedCount","load","strength","context","blockChain","getTreeStrength","Math","floor","Number","matches","value","change","getInventoryChange","Wood","setTimeout","chop","resource","find","item","name","address","open","close","limit","min","Axe","map","gridPosition","index","choppedTreeCount","isNextToChop","isHighlighted","showWaiting","gatherer","undefined","r","opacity"],"mappings":"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","sourcesContent":["import { useService } from \"@xstate/react\";\nimport React, { useEffect } from \"react\";\nimport Modal from \"react-bootstrap/Modal\";\nimport classnames from \"classnames\";\n\nimport closeIcon from \"../../images/ui/close.png\";\nimport tree from \"../../images/decorations/tree.png\";\nimport stump from \"../../images/decorations/stump.png\";\nimport chopping from \"../../images/characters/chopping.gif\";\nimport waiting from \"../../images/characters/waiting.gif\";\nimport questionMark from \"../../images/ui/expression_confused.png\";\nimport arrowUp from \"../../images/ui/arrow_up.png\";\nimport arrowDown from \"../../images/ui/arrow_down.png\";\nimport axe from \"../../images/ui/axe.png\";\nimport wood from \"../../images/ui/wood.png\";\nimport timer from \"../../images/ui/timer.png\";\n\nimport { Panel } from \"../ui/Panel\";\nimport { Message } from \"../ui/Message\";\nimport { Button } from \"../ui/Button\";\n\nimport {\n  BlockchainEvent,\n  BlockchainState,\n  Context,\n  service,\n} from \"../../machine\";\n\nimport { Inventory, items } from \"../../types/crafting\";\n\nimport \"./Trees.css\";\n\nconst TREES: React.CSSProperties[] = [\n  {\n    gridColumn: \"9/10\",\n    gridRow: \"3/4\",\n  },\n  {\n    gridColumn: \"5/6\",\n    gridRow: \"3/4\",\n  },\n  {\n    gridColumn: \"2/3\",\n    gridRow: \"2/3\",\n  },\n  {\n    gridColumn: \"3/4\",\n    gridRow: \"6/7\",\n  },\n  {\n    gridColumn: \"1/2\",\n    gridRow: \"8/9\",\n  },\n  {\n    gridColumn: \"3/4\",\n    gridRow: \"11/12\",\n  },\n  {\n    gridColumn: \"7/8\",\n    gridRow: \"11/12\",\n  },\n  {\n    gridColumn: \"12/13\",\n    gridRow: \"11/12\",\n  },\n  {\n    gridColumn: \"15/16\",\n    gridRow: \"3/4\",\n  },\n  {\n    gridColumn: \"12/13\",\n    gridRow: \"1/2\",\n  },\n];\n\ninterface Props {\n  inventory: Inventory;\n}\n\nexport const Trees: React.FC<Props> = ({ inventory }) => {\n  const [machineState, send] = useService<\n    Context,\n    BlockchainEvent,\n    BlockchainState\n  >(service);\n\n  const [showModal, setShowModal] = React.useState(false);\n  const [treeStrength, setTreeStrength] = React.useState(10);\n  const [amount, setAmount] = React.useState(0);\n  const [choppedCount, setChoppedCount] = React.useState(0);\n  const [showChoppedCount, setShowChoppedCount] = React.useState(false);\n\n  useEffect(() => {\n    const load = async () => {\n      const strength = await machineState.context.blockChain.getTreeStrength();\n      setTreeStrength(Math.floor(Number(strength)));\n    };\n\n    if (machineState.matches(\"farming\")) {\n      load();\n      setAmount(0);\n    }\n  }, [machineState.value]);\n\n  useEffect(() => {\n    const change = machineState.context.blockChain.getInventoryChange();\n\n    if (change.Wood > 0) {\n      setChoppedCount(change.Wood);\n      setShowChoppedCount(true);\n      setTimeout(() => setShowChoppedCount(false), 3000);\n    }\n  }, [machineState.value, inventory]);\n\n  const chop = () => {\n    send(\"CHOP\", {\n      resource: items.find((item) => item.name === \"Wood\").address,\n      amount: amount,\n    });\n\n    setShowModal(false);\n  };\n\n  const open = () => {\n    setShowModal(true);\n    setAmount(1);\n  };\n\n  const close = () => {\n    setShowModal(false);\n    setAmount(0);\n  };\n\n  const limit = Math.min(treeStrength, inventory.Axe);\n\n  return (\n    <>\n      {TREES.map((gridPosition, index) => {\n        const choppedTreeCount = 10 - treeStrength;\n        if (choppedTreeCount > index || machineState.matches(\"onboarding\")) {\n          return (\n            <div style={gridPosition}>\n              <img src={stump} className=\"wood-stump gather-tree\" alt=\"tree\" />\n            </div>\n          );\n        }\n\n        const isNextToChop = choppedTreeCount === index;\n        const isHighlighted = amount + choppedTreeCount >= index + 1;\n        const showWaiting =\n          !machineState.matches(\"onboarding\") &&\n          !machineState.matches(\"chopping\") &&\n          (isNextToChop || isHighlighted);\n\n        return (\n          <div\n            style={gridPosition}\n            className={classnames(\"gather-tree\", {\n              \"gatherer-selected\": isHighlighted,\n              gatherer: isNextToChop,\n            })}\n            onClick={isNextToChop ? open : undefined}\n          >\n            <img src={tree} className=\"tree\" alt=\"tree\" />\n            {isHighlighted && machineState.matches(\"chopping\") && (\n              <>\n                <img src={chopping} className=\"wood-chopper\" />\n                <div className=\"gathered-resource-feedback\">\n                  <span>+</span>\n                  <img src={wood} className=\"wood-chopped\" />\n                </div>\n              </>\n            )}\n            {showWaiting && (\n              <div>\n                <img src={waiting} className=\"wood-chopper\" />\n                <img src={questionMark} className=\"chopper-question\" />\n              </div>\n            )}\n          </div>\n        );\n      })}\n\n      {showModal && (\n        <Modal\n          show={showModal}\n          centered\n          onHide={close}\n          backdrop={false}\n          dialogClassName=\"gather-modal\"\n        >\n          <Panel>\n            <div className=\"gather-panel\">\n              <img\n                src={closeIcon}\n                className=\"gather-close-icon\"\n                onClick={close}\n              />\n\n              <div className=\"resource-materials\">\n                <div>\n                  <div className=\"resource-material\">\n                    <span>Requires</span>\n                    <img src={axe} />\n                  </div>\n                  <div className=\"resource-material\">\n                    <span>Chops</span>\n                    <div>\n                      <span>3-5</span>\n                      <img src={wood} />\n                    </div>\n                  </div>\n                  <div className=\"resource-material\">\n                    <span>Regrows every hour</span>\n                    <div>\n                      <img id=\"resource-timer\" src={timer} />\n                    </div>\n                  </div>\n                </div>\n                {inventory.Axe < amount ? (\n                  <Message>\n                    You need a <img src={axe} className=\"required-tool\" />\n                  </Message>\n                ) : (\n                  <div className=\"gather-resources\">\n                    <div id=\"craft-count\">\n                      <img className=\"gather-axe\" src={axe} />\n                      <Message>{amount}</Message>\n                      <div id=\"arrow-container\">\n                        {amount < limit ? (\n                          <img\n                            className=\"craft-arrow\"\n                            alt=\"Step up donation value\"\n                            src={arrowUp}\n                            onClick={() => setAmount((r) => r + 1)}\n                          />\n                        ) : (\n                          <div />\n                        )}\n\n                        {amount > 1 && (\n                          <img\n                            className=\"craft-arrow\"\n                            alt=\"Step down donation value\"\n                            src={arrowDown}\n                            onClick={() => setAmount((r) => r - 1)}\n                          />\n                        )}\n                      </div>\n                    </div>\n\n                    <Button onClick={chop} disabled={inventory.Axe < amount}>\n                      <span id=\"craft-button-text\">Chop</span>\n                    </Button>\n                  </div>\n                )}\n              </div>\n              <div className=\"resource-details\">\n                <span className=\"resource-title\">Tree</span>\n                <img src={tree} className=\"resource-image\" />\n                <span className=\"resource-description\">\n                  A bountiful resource that can be chopped for wood.\n                </span>\n                <a\n                  href=\"https://docs.sunflower-farmers.com/resources\"\n                  target=\"_blank\"\n                >\n                  <h3 className=\"current-price-supply-demand\">Read more</h3>\n                </a>\n              </div>\n            </div>\n          </Panel>\n        </Modal>\n      )}\n      <div\n        id=\"resource-increase-panel\"\n        style={{\n          opacity: showChoppedCount ? 1 : 0,\n        }}\n      >\n        <Panel>\n          <div className=\"wood-toast-body\">\n            +{choppedCount}\n            <img className=\"gather-axe\" src={wood} />\n          </div>\n        </Panel>\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}