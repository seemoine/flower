{"ast":null,"code":"var _jsxFileName = \"/home/jacob/Documents/Programming/myApp/src/dapp/components/ui/UpgradeModal.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useService } from \"@xstate/react\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { service } from \"../../machine\";\nimport pumpkin from \"../../images/pumpkin/fruit.png\";\nimport beetroot from \"../../images/beetroot/fruit.png\";\nimport cauliflower from \"../../images/cauliflower/fruit.png\";\nimport parsnip from \"../../images/parsnip/fruit.png\";\nimport radish from \"../../images/radish/fruit.png\";\nimport cancel from \"../../images/ui/cancel.png\";\nimport { getUpgradePrice } from \"../../utils/land\";\nimport { getMarketRate } from \"../../utils/supply\";\nimport { Panel } from \"./Panel\";\nimport { Message } from \"./Message\";\nimport { Button } from \"./Button\";\nimport \"./UpgradeModal.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const UpgradeModal = _ref => {\n  _s();\n\n  let {\n    isOpen,\n    onClose,\n    farmSize,\n    balance\n  } = _ref;\n  const [machineState, send] = useService(service);\n  const [totalSupply, setTotalSupply] = React.useState(1);\n  React.useEffect(() => {\n    const load = async () => {\n      const supply = await service.machine.context.blockChain.totalSupply();\n      setTotalSupply(supply);\n    };\n\n    load();\n  }, [isOpen]);\n\n  const onUpgrade = () => {\n    send(\"SAVE\", {\n      action: \"UPGRADE\"\n    });\n    onClose();\n  };\n\n  const marketRate = getMarketRate(totalSupply);\n  const isUnsaved = machineState.context.blockChain.isUnsaved();\n  const levelOnePrice = getUpgradePrice({\n    farmSize,\n    totalSupply\n  });\n  const levelTwoPrice = getUpgradePrice({\n    farmSize,\n    totalSupply\n  });\n  const levelThreePrice = getUpgradePrice({\n    farmSize,\n    totalSupply\n  });\n  const levelFourPrice = getUpgradePrice({\n    farmSize,\n    totalSupply\n  });\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    centered: true,\n    show: isOpen,\n    onHide: onClose,\n    children: /*#__PURE__*/_jsxDEV(Panel, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"charity-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Upgrade Farm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), isUnsaved ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upgrade-required\",\n            children: /*#__PURE__*/_jsxDEV(Message, {\n              children: [\"Save your farm first\", /*#__PURE__*/_jsxDEV(\"img\", {\n                src: cancel,\n                className: \"insufficient-funds-cross\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            id: \"donate-description\",\n            children: [\"You must first save your farm to the blockchain before attempting to upgrade.\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"donate-description\",\n          children: \"Upgrade your farm to unlock new plants and harvestable fields.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"charities\",\n          children: [farmSize === 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"charity-description\",\n              children: \"Upgrade to 8 fields\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upgrade-icons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"charity-description\",\n                children: \"Unlock:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: pumpkin,\n                className: \"upgrade-fruit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: beetroot,\n                className: \"upgrade-fruit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"charity-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: `${levelOnePrice} $SFF`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                disabled: isUnsaved || balance < levelOnePrice,\n                onClick: onUpgrade,\n                children: \"Upgrade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), balance < levelOnePrice && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"insufficent-upgrade-funds\",\n              children: \"Insufficent funds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), farmSize === 8 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"charity-description\",\n              children: \"Upgrade to 11 fields\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upgrade-icons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"charity-description\",\n                children: \"Unlock:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: cauliflower,\n                className: \"upgrade-fruit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"charity-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: `${levelTwoPrice} $SFF`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                disabled: isUnsaved || farmSize < 8 || balance < levelTwoPrice,\n                onClick: onUpgrade,\n                children: \"Upgrade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 17\n            }, this), balance < levelTwoPrice && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"insufficent-upgrade-funds\",\n              children: \"Insufficent funds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this), farmSize === 11 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"charity-description\",\n              children: \"Upgrade to 14 fields\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upgrade-icons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"charity-description\",\n                children: \"Unlock:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: parsnip,\n                className: \"upgrade-fruit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"charity-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: `${levelThreePrice} $SFF`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                disabled: isUnsaved || farmSize < 11 || balance < levelThreePrice,\n                onClick: onUpgrade,\n                children: \"Upgrade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this), balance < levelThreePrice && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"insufficent-upgrade-funds\",\n              children: \"Insufficent funds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this), farmSize === 14 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"charity-description\",\n              children: \"Upgrade to 17 fields\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upgrade-icons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"charity-description\",\n                children: \"Unlock:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                src: radish,\n                className: \"upgrade-fruit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"charity-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: `${levelFourPrice} $SFF`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                disabled: isUnsaved || farmSize < 14 || balance < levelFourPrice,\n                onClick: onUpgrade,\n                children: \"Upgrade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 17\n            }, this), balance < levelFourPrice && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"insufficent-upgrade-funds\",\n              children: \"Insufficent funds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UpgradeModal, \"cs4Oz//4wCaj4bmhDnETg5iVsZY=\", false, function () {\n  return [useService];\n});\n\n_c = UpgradeModal;\nexport const UpgradeOverlay = props => /*#__PURE__*/_jsxDEV(\"div\", {\n  id: \"tester\",\n  ...props,\n  children: /*#__PURE__*/_jsxDEV(Message, {\n    children: \"Upgrade required\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 224,\n  columnNumber: 3\n}, this);\n_c2 = UpgradeOverlay;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UpgradeModal\");\n$RefreshReg$(_c2, \"UpgradeOverlay\");","map":{"version":3,"sources":["/home/jacob/Documents/Programming/myApp/src/dapp/components/ui/UpgradeModal.tsx"],"names":["React","useService","Modal","service","pumpkin","beetroot","cauliflower","parsnip","radish","cancel","getUpgradePrice","getMarketRate","Panel","Message","Button","UpgradeModal","isOpen","onClose","farmSize","balance","machineState","send","totalSupply","setTotalSupply","useState","useEffect","load","supply","machine","context","blockChain","onUpgrade","action","marketRate","isUnsaved","levelOnePrice","levelTwoPrice","levelThreePrice","levelFourPrice","UpgradeOverlay","props"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useService } from \"@xstate/react\";\n\nimport Modal from \"react-bootstrap/Modal\";\n\nimport {\n  service,\n  Context,\n  BlockchainEvent,\n  BlockchainState,\n} from \"../../machine\";\n\nimport sunflower from \"../../images/sunflower/fruit.png\";\nimport potato from \"../../images/potato/fruit.png\";\nimport pumpkin from \"../../images/pumpkin/fruit.png\";\nimport beetroot from \"../../images/beetroot/fruit.png\";\nimport cauliflower from \"../../images/cauliflower/fruit.png\";\nimport parsnip from \"../../images/parsnip/fruit.png\";\nimport radish from \"../../images/radish/fruit.png\";\n\nimport cancel from \"../../images/ui/cancel.png\";\n\nimport { getUpgradePrice } from \"../../utils/land\";\nimport { getMarketRate } from \"../../utils/supply\";\n\nimport { Panel } from \"./Panel\";\nimport { Message } from \"./Message\";\nimport { Button } from \"./Button\";\n\nimport \"./UpgradeModal.css\";\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  farmSize: number;\n  balance: number;\n}\n\nexport const UpgradeModal: React.FC<Props> = ({\n  isOpen,\n  onClose,\n  farmSize,\n  balance,\n}) => {\n  const [machineState, send] = useService<\n    Context,\n    BlockchainEvent,\n    BlockchainState\n  >(service);\n  const [totalSupply, setTotalSupply] = React.useState<number>(1);\n\n  React.useEffect(() => {\n    const load = async () => {\n      const supply =\n        await service.machine.context.blockChain.totalSupply();\n      setTotalSupply(supply);\n    };\n\n    load();\n  }, [isOpen]);\n\n  const onUpgrade = () => {\n    send(\"SAVE\", { action: \"UPGRADE\" });\n    onClose();\n  };\n\n  const marketRate = getMarketRate(totalSupply);\n\n  const isUnsaved = machineState.context.blockChain.isUnsaved();\n\n  const levelOnePrice = getUpgradePrice({ farmSize, totalSupply });\n  const levelTwoPrice = getUpgradePrice({ farmSize, totalSupply });\n  const levelThreePrice = getUpgradePrice({ farmSize, totalSupply });\n  const levelFourPrice = getUpgradePrice({ farmSize, totalSupply });\n\n  return (\n    <Modal centered show={isOpen} onHide={onClose}>\n      <Panel>\n        <div id=\"charity-container\">\n          <span>Upgrade Farm</span>\n\n          {isUnsaved ? (\n            <>\n              <div className=\"upgrade-required\">\n                <Message>\n                  Save your farm first\n                  <img src={cancel} className=\"insufficient-funds-cross\" />\n                </Message>\n              </div>\n              <span id=\"donate-description\">\n                You must first save your farm to the blockchain before\n                attempting to upgrade.{\" \"}\n              </span>\n            </>\n          ) : (\n            <span id=\"donate-description\">\n              Upgrade your farm to unlock new plants and harvestable\n              fields.\n            </span>\n          )}\n\n          <div id=\"charities\">\n            {farmSize === 5 && (\n              <div>\n                <span className=\"charity-description\">\n                  Upgrade to 8 fields\n                </span>\n                <div className=\"upgrade-icons\">\n                  <span className=\"charity-description\">Unlock:</span>\n                  <img src={pumpkin} className=\"upgrade-fruit\" />\n                  <img src={beetroot} className=\"upgrade-fruit\" />\n                </div>\n                <div className=\"charity-buttons\">\n                  <span>{`${levelOnePrice} $SFF`}</span>\n                  <Button\n                    disabled={isUnsaved || balance < levelOnePrice}\n                    onClick={onUpgrade}\n                  >\n                    Upgrade\n                  </Button>\n                </div>\n                {balance < levelOnePrice && (\n                  <span className=\"insufficent-upgrade-funds\">\n                    Insufficent funds\n                  </span>\n                )}\n              </div>\n            )}\n            {farmSize === 8 && (\n              <div>\n                <span className=\"charity-description\">\n                  Upgrade to 11 fields\n                </span>\n                <div className=\"upgrade-icons\">\n                  <span className=\"charity-description\">Unlock:</span>\n                  <img src={cauliflower} className=\"upgrade-fruit\" />\n                </div>\n                <div className=\"charity-buttons\">\n                  <span>{`${levelTwoPrice} $SFF`}</span>\n                  <Button\n                    disabled={\n                      isUnsaved || farmSize < 8 || balance < levelTwoPrice\n                    }\n                    onClick={onUpgrade}\n                  >\n                    Upgrade\n                  </Button>\n                </div>\n                {balance < levelTwoPrice && (\n                  <span className=\"insufficent-upgrade-funds\">\n                    Insufficent funds\n                  </span>\n                )}\n              </div>\n            )}\n\n            {farmSize === 11 && (\n              <div>\n                <span className=\"charity-description\">\n                  Upgrade to 14 fields\n                </span>\n                <div className=\"upgrade-icons\">\n                  <span className=\"charity-description\">Unlock:</span>\n                  <img src={parsnip} className=\"upgrade-fruit\" />\n                </div>\n                <div className=\"charity-buttons\">\n                  <span>{`${levelThreePrice} $SFF`}</span>\n                  <Button\n                    disabled={\n                      isUnsaved ||\n                      farmSize < 11 ||\n                      balance < levelThreePrice\n                    }\n                    onClick={onUpgrade}\n                  >\n                    Upgrade\n                  </Button>\n                </div>\n                {balance < levelThreePrice && (\n                  <span className=\"insufficent-upgrade-funds\">\n                    Insufficent funds\n                  </span>\n                )}\n              </div>\n            )}\n\n            {farmSize === 14 && (\n              <div>\n                <span className=\"charity-description\">\n                  Upgrade to 17 fields\n                </span>\n                <div className=\"upgrade-icons\">\n                  <span className=\"charity-description\">Unlock:</span>\n                  <img src={radish} className=\"upgrade-fruit\" />\n                </div>\n                <div className=\"charity-buttons\">\n                  <span>{`${levelFourPrice} $SFF`}</span>\n                  <Button\n                    disabled={\n                      isUnsaved ||\n                      farmSize < 14 ||\n                      balance < levelFourPrice\n                    }\n                    onClick={onUpgrade}\n                  >\n                    Upgrade\n                  </Button>\n                </div>\n                {balance < levelFourPrice && (\n                  <span className=\"insufficent-upgrade-funds\">\n                    Insufficent funds\n                  </span>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </Panel>\n    </Modal>\n  );\n};\n\nexport const UpgradeOverlay = (props) => (\n  <div id=\"tester\" {...props}>\n    <Message>Upgrade required</Message>\n  </div>\n);\n"]},"metadata":{},"sourceType":"module"}